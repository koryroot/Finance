{% extends "layout.html" %}
{% block content %}

<div class="max-w-4xl mx-auto space-y-8 pb-20">
    
    <div class="flex justify-between items-center bg-gray-800 p-4 rounded-xl border border-gray-700">
        <div>
            <h1 class="text-2xl font-bold text-white">Simulador de Mercado</h1>
            <p class="text-xs text-gray-400">Analiza la noticia y decide tu estrategia.</p>
        </div>
        <div class="text-right">
            <p class="text-xs text-gray-400 uppercase">Capital Disponible</p>
            <p class="text-2xl font-mono font-bold text-green-400">USD {{ "{:,.2f}".format(wallet) }}</p>
        </div>
    </div>

    <div class="bg-gray-900 rounded-2xl border border-gray-700 shadow-2xl overflow-hidden relative">
        <div class="h-2 w-full bg-gradient-to-r from-blue-500 to-purple-600"></div>
        
        <div class="p-8 text-center space-y-6">
            
            <span class="inline-block px-3 py-1 rounded-full bg-gray-800 text-gray-400 text-sm font-mono border border-gray-700">
                ðŸ“… {{ scenario.date }}
            </span>

            <h2 class="text-3xl md:text-4xl font-bold text-white leading-tight">
                "{{ scenario.headline }}"
            </h2>

            <div class="max-w-md mx-auto mt-8">
                <div class="flex justify-between text-xs text-gray-400 mb-1">
                    <span>Miedo</span>
                    <span class="text-white font-bold uppercase tracking-widest">{{ scenario.sentiment_label }}</span>
                    <span>Euforia</span>
                </div>
                
                <div class="h-4 bg-gray-800 rounded-full overflow-hidden border border-gray-700 relative">
                    <div class="w-full h-full bg-gradient-to-r from-red-600 via-yellow-500 to-green-600 opacity-30"></div>
                    <div class="absolute top-0 bottom-0 w-1 bg-white shadow-[0_0_10px_white] transition-all duration-1000" 
                         style="left: {{ scenario.sentiment * 100 }}%"></div>
                </div>
            </div>

        </div>

        <div class="bg-gray-800 p-8 border-t border-gray-700 mt-8">
            <p class="text-center text-gray-300 mb-6 text-sm">
                Basado en esta noticia... Â¿QuÃ© harÃ¡ el mercado maÃ±ana?
            </p>

            <form action="{{ url_for('learning.simulator') }}" method="POST" class="grid grid-cols-2 gap-6 max-w-lg mx-auto">
                <input type="hidden" name="scenario_id" value="{{ scenario.id }}">
                
                <button type="submit" name="action" value="buy" 
                        class="bg-gradient-to-b from-green-600 to-green-700 hover:from-green-500 hover:to-green-600 text-white border-b-4 border-green-900 active:border-green-700 active:translate-y-1 py-4 rounded-xl flex flex-col items-center transition shadow-lg group">
                    <span class="text-2xl mb-1 group-hover:scale-110 transition-transform">ðŸ“ˆ</span>
                    <span class="text-lg font-bold">COMPRAR</span>
                    <span class="text-[10px] opacity-75 font-normal uppercase tracking-wide">Creo que subirÃ¡</span>
                </button>

                <button type="submit" name="action" value="short" 
                        class="bg-gradient-to-b from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 text-white border-b-4 border-red-900 active:border-red-700 active:translate-y-1 py-4 rounded-xl flex flex-col items-center transition shadow-lg group">
                    <span class="text-2xl mb-1 group-hover:scale-110 transition-transform">ðŸ“‰</span>
                    <span class="text-lg font-bold">VENDER (Short)</span>
                    <span class="text-[10px] opacity-75 font-normal uppercase tracking-wide">Creo que bajarÃ¡</span>
                </button>
            </form>
        </div>
    </div>

</div>
{% endblock %}

{% block sidebar %}
<div class="hidden md:block md:w-1/4">
    <div class="bg-gray-800 rounded-2xl p-6 border border-gray-700">
        <h3 class="text-lg font-bold text-white mb-4">AnÃ¡lisis de Mercado</h3>
        <p class="text-gray-400 text-sm mb-4">ObtÃ©n informaciÃ³n valiosa sobre las tendencias del mercado y toma decisiones informadas.</p>
        <a href="{{ url_for('learning.market_analysis') }}" class="text-blue-400 hover:underline">Ver AnÃ¡lisis &rarr;</a>
    </div>
</div>
{% endblock %}
